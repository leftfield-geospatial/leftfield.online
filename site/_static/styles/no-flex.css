/*===============================================================================================
  Styles for non-flex cross browser support
================================================================================================*/

/* Sphinx-design grids
-------------------------------------------------------------------------------------------------*/
/* see https://tylercipriani.com/blog/2012/08/01/display-inline-block-extra-margin. */
.bd-main {
    display: block;
    outline: 1px solid green;
}

/* sphinx-design styles for no `flex-wrap: wrap` support */
/* column style (not "row" as it says) */
.sd-d-flex-row {
    /* override `display: flex !important` in sphinx-design sd-d-flex-row */
    display: inline-block !important;
    vertical-align: top;
    /* space is inserted between sibling inline-blocks - this is an empirical workaround to remove
     it.  columns would be too wide to fit in a row without it. */
    margin-right: -0.3em;
    /* outline: 1px solid blue; */
}

.sd-row {
    /* allow wrapping of child inline-block elements */
    display: block;
    /* expand width to page, otherwise it would be width of children. */
    /* width: 100%;     */
    /* outline: 1px solid red; */
}

/* turn card borders off as adjacent cards will not have the same height */
/* TODO: turn off the header underline too?*/
.bd-content .sd-card {
    border-style: none;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
}

/* scale card on hover using available support */
.sd-card-hover:hover {
    -moz-transform: scale(1.01);
    -ms-transform: scale(1.01);
    -webkit-transform: scale(1.01);
    transform: scale(1.01);
}

/* sphinx-design styles for browsers with flex wrapping (and @support) support */
@supports(flex-wrap: wrap) and (flex-direction: row) and (flex-shrink: 0) and (flex: 0 0 auto) and (flex: 1 0 0%) {
    /* leave bd-main on `display: block` to work around chrome v29-38 & safari 9-10 issues */
    /* .bd-main {
        display: flex;
        outline: 1px solid green;
    } */

    .sd-d-flex-row {
        /* override `display: inline-block !important` above */
        display: flex !important;
        /* remove the margin workaround above */
        margin-right: unset;
        /* outline: 1px dashed blue; */
    }

    .sd-row {
        display: flex;
        /* outline: 1px dashed red; */
    }

    /* revert card borders for = height cards */
    /* TODO: what are the original padding settings - we should revert to those. */
    .bd-content .sd-card {
        border-style: solid;
        padding-left: unset;
        padding-right: unset;
    }
    
}

/* Header
-------------------------------------------------------------------------------------------------*/

/* horizontally center the main header container */
.bd-header {
    display: block;
}

.bd-header .bd-header__inner {
    display: block;
    margin-left: auto;
    margin-right: auto;
}


/* change header elements with `display: flex` to `display: inline-block` so they are arranged 
horizontally. */
.navbar-persistent--mobile,
.bd-header label.sidebar-toggle,
.navbar-brand,
.bd-header .navbar-header-items__start,
.bd-header .navbar-header-items__center,
.bd-header .navbar-header-items__end,
.bd-header .navbar-nav,
.bd-header .navbar-item,
/* nav-item not set in theme but include it here to horizontally stack e.g. section or icon links */
.bd-header .nav-item {
    display: inline-block;
    /* `vertical-align: auto` is default but mis-calculates element heights in some browsers,
    so it is forced to middle here. */
    vertical-align: middle;
    outline: 1px solid red;
}

/* repeat pydata-sphinx-theme rule(s) for turning off "mobile" res sidebar toggle & search button
(necessary due to its inclusion in the display: inline-block list above) */
@media(min-width:960px) {
    label.sidebar-toggle.primary-toggle {
        display: none
    }

    .navbar-persistent--mobile {
        display: none
    }
}

/* right align section etc link container & "mobile" res search button */
/* TODO can we use margin auto instead of float? don't think margin works with inline blocks? */
.bd-header .navbar-header-items,
.navbar-persistent--mobile {
    float: right;
}

/* left align the sidebar toggle button */
.bd-header label.sidebar-toggle {
    float: left;
}

/* float the .navbar-header-items container so it scales to its floated contents */
/* (unnecessary - heights are set below) */
/* .bd-header .bd-header__inner {
    float: left;
} */

/* pydata-sphinx-theme sets heights in navbar-item & navbar-brand with --pst-header-height
custom varable. they are re-set here for browsers without var support.
in addition, the heights on parents of centered elements below must also be set, so
bd-header__inner is included in the list.*/
.bd-header .bd-header__inner,
.bd-header .navbar-item,
.navbar-brand {
    height: 5.6rem;
    max-height: 5.6rem;
}

/* TODO: why don't we see the search button in old browsers? Also, does it work where we do see it? */
/* vertically center the logo, section and icon links, and "mobile" res sidebar toggle and search button */
.navbar-persistent--mobile,
.bd-header label.sidebar-toggle,
.navbar-brand img,
/* section and icon links */
.bd-header .navbar-item>.navbar-nav,
/* navbar search button */
.bd-header .navbar-item>button {
    position: relative;
    top: 50%;
    -moz-transform: translateY(-50%);
    -ms-transform: translateY(-50%);
    -webkit-transform: translateY(-50%);
    transform: translateY(-50%);
    outline: 1px solid green;
}

/* re-set header elements to their default theme settings if flex is adequately supported */
@supports(display: flex) and (align-items: center) and (justify-content: end) and (flex-shrink: 1) and (flex-grow: 1) and (flex-flow: wrap) {
    .bd-header {
        display: flex;
    }

    .bd-header .bd-header__inner {
        display: flex;
        margin-left: unset;
        margin-right: unset;
    }

    .navbar-persistent--mobile,
    .bd-header label.sidebar-toggle,
    .navbar-brand,
    .bd-header .navbar-header-items__start,
    .bd-header .navbar-header-items__center,
    .bd-header .navbar-header-items__end,
    .bd-header .navbar-nav,
    .bd-header .navbar-item,
    /* nav-item not set in theme but include it here to horizontally stack e.g. section or icon links */
    .bd-header .nav-item {
        display: flex;
        float: unset;
        vertical-align: unset;
        outline: 1px dashed red;
    }

    /* repeat pydata-sphinx-theme rule(s) for turning off "mobile" res sidebar toggle & search button
    (necessary due to its includion in the display: inline-block list above) */
    @media(min-width:960px) {
        label.sidebar-toggle.primary-toggle {
            display: none
        }

        .navbar-persistent--mobile {
            display: none
        }
    }

    /* `float: *` settings are ignored in `display: flex` so no need to unset here */

    .navbar-persistent--mobile,
    .bd-header label.sidebar-toggle,
    .navbar-brand img,
    /* section and icon links */
    .bd-header .navbar-item>.navbar-nav,
    /* search button */
    .bd-header .navbar-item>button {
        position: unset;
        top: unset;
        -moz-transform: unset;
        -ms-transform: unset;
        -webkit-transform: unset;
        transform: unset;
        outline: 1px dashed green;
    }
}


/* Sidebar
-------------------------------------------------------------------------------------------------*/

/* configre theme `display: flex; flex-direction: column` (i.e. vertically stacked) elements as 
`display: block` */
.bd-sidebar-primary,
.bd-sidebar-primary .sidebar-header-items,
.bd-sidebar-primary .sidebar-header-items .sidebar-header-items__center,
.bd-sidebar-primary .sidebar-header-items .sidebar-header-items__center .nav-item,
.bd-sidebar-primary .sidebar-header-items .sidebar-header-items__end {
    display: block;
    outline: 1px solid red;
}

/* stack end (icon link) elements horizontally */
.bd-sidebar-primary .sidebar-header-items .sidebar-header-items__end .navbar-item {
    display: inline-block;
    vertical-align: middle;
    outline: 1px solid green;
}    

/* re-set sidebar elements to their default theme settings if flex is adequately supported */
@supports(display: flex) and (gap: 0.5rem) and (flex: 0 0 auto) and (flex-direction: column) and (align-items: center) {
    .bd-sidebar-primary,
    .bd-sidebar-primary .sidebar-header-items,
    .bd-sidebar-primary .sidebar-header-items .sidebar-header-items__center,
    .bd-sidebar-primary .sidebar-header-items .sidebar-header-items__center .nav-item,
    .bd-sidebar-primary .sidebar-header-items .sidebar-header-items__end {
        display: flex;
        outline: 1px dashed red;
    }
    
    /* stack horizontally */
    .bd-sidebar-primary .sidebar-header-items .sidebar-header-items__end .navbar-item {
        display: flex;
        vertical-align: unset;
        outline: 1px dashed green;
    }
}

/* Footer
-------------------------------------------------------------------------------------------------*/

/* horizontally center the main footer container */
.bd-footer,
.bd-footer .bd-footer__inner {
    display: block;
    outline: 1px solid red;
}

/* change footer elements with `display: flex` to `display: inline-block` so they are arranged 
horizontally. */
.bd-footer .footer-items__start,
.bd-footer .footer-items__end {
    display: inline-block;
    outline: 1px solid green;
}

/* right align the end container */
.bd-footer .footer-items__end {
    float: right;
    text-align: right;
}

/* re-set footer elements to their default theme settings if flex is adequately supported */
@supports(display: flex) and (flex-grow: 1) and (flex-direction: column) and (justify-content: center) {
    /* and (text-align: end)*/

    .bd-footer,
    .bd-footer .bd-footer__inner,
    .bd-footer .footer-items__start,
    .bd-footer .footer-items__end {
        display: flex;
        outline: 1px dashed red;
    }

    .bd-footer .footer-items__end {
        float: none;
        /* the theme sets `text-align: end`, but I think `text-align: right` set above is correct*/
        /* text-align: end; */
    }
}


/* Main content
-------------------------------------------------------------------------------------------------*/
/* display body content in safari 9-10 & chrome 29 (+?) */
/* .bd-main .bd-content {
    height: 100%;
}  */
.bd-container,
.bd-main .bd-content {
    display: block;
}

.bd-container .bd-container__inner,
.bd-main .bd-content .bd-article-container {
    display: block;
    margin-left: auto;
    margin-right: auto;
}

@supports(display: flex) and (justify-content: center) and (flex-direction: column) and (justify-content: start) {
    .bd-container,
    .bd-main .bd-content {
        display: flex;
    }

    .bd-container .bd-container__inner,
    .bd-main .bd-content .bd-article-container {
        display: flex;
        margin-left: unset;
        margin-right: unset;
    }
}


/* Breadcrumbs
-------------------------------------------------------------------------------------------------*/
/* stack breadcrumbs horizontally */
ul.bd-breadcrumbs li.breadcrumb-item,
ul.bd-breadcrumbs li.breadcrumb-item a {
    display: inline-block;
    /* display: -webkit-flex; */
    display: flex;
}

/* breadcrumb divider */
ul.bd-breadcrumbs li.breadcrumb-item:not(.breadcrumb-home):before {
    content: ">";
}
